$.fn.placeholder=function(a){if($(this).attr('type')=='password'){$(this)[0].setAttribute('type','text');$(this).val(a);$(this).focusin(function(){if($(this).val()==a)$(this).val('')});$(this).focusout(function(){if($(this).val()==''){$(this)[0].setAttribute('type','text');$(this).val(a)}});$(this).change(function(){$(this)[0].setAttribute('type','password')}).keydown(function(){$(this)[0].setAttribute('type','password')})}else{$(this).val(a);$(this).focusin(function(){if($(this).val()==a)$(this).val('')});$(this).focusout(function(){if($(this).val()=='')$(this).val(a)})}};function createWnd(width,height,title,html){var wnd=$('<div class="wnd" style="width:'+width+'px;height:'+height+'px;"></div>').hide();$('body').append(wnd);var isMouseDown=false;var offsetX;var offsetY;var titlebar=$('<div style="cursor:default;padding:0 10px;height:25px;line-height:25px;color:#fff;background:#0d5995">'+title+'</div>').mousedown(function(e){offsetX=e.clientX-parseInt(wnd.css('left'));offsetY=e.clientY-parseInt(wnd.css('top'));isMouseDown=true}).mousemove(function(e){if(isMouseDown){wnd.css('left',e.clientX-offsetX).css('top',e.clientY-offsetY)}}).mouseup(function(e){isMouseDown=false}).mouseout(function(e){isMouseDown=false});var closebtn=$('<span class="closebtn" title="关闭">×</span>').click(function(){wnd.hide()});var client=$('<div class="client" style="overflow:auto;width:100%;height:'+(height-25)+'px;"></div>').append(html);wnd.append(closebtn).append(titlebar).append(client);wnd.css('top',($(window).height()-parseInt(wnd.css('height')))/2);wnd.css('left',($(window).width()-parseInt(wnd.css('width')))/2);wnd.show()}function msgBox(title,msg){var html='<div style="padding:5px 10px;width:280px;height:165px;">'+msg+'</div>';createWnd(300,200,title,html)}function checkEmail(str){return/^[\w]+[\w\.]*@[\w-]+\.[\w\.]+$/.test(str)}function checkStuId(str){if(str.length<6)return false;return/^[a-z,A-Z,0-9]+$/.test(str)}function checkPhone(str){return/^\d{11}$/.test(str)}$(function(){$('input,textarea').focusin(function(){$(this).addClass('current')}).focusout(function(){$(this).removeClass('current')});$('.closebtn').click(function(){$(this).parent().hide()});$('#enlist_email').placeholder('Email');$('#enlist_id').placeholder('学号');$('#enlist_phone').placeholder('手机');$('#enlist_txt').placeholder('自我介绍，特长，技能或者随便说点什么');$('#comment_email').placeholder('Email (用于接收反馈)');$('#comment_txt').placeholder('请输入您的任何建议和看法 (比如你想要一些什么功能)');$('#enlist_bar').click(function(){$('#enlist').css('left','-330px').show().animate({left:0},250)});$('#comment_bar').click(function(){$('#comment').css('left','-330px').show().animate({left:0},250)});var d=document.getElementById('enlist_phone');d.setAttribute('maxlength',11);d.onkeydown=function(event){return(/[\d\t\b]/.test(String.fromCharCode(event.keyCode)))};var e1=document.getElementById('enlist_email');var e2=document.getElementById('comment_email');e1.oninput=function(){e2.value=e1.value};e2.oninput=function(){e1.value=e2.value};$('#enlist_submit').click(function(){if(!checkEmail($('#enlist_email').val())){alert('邮箱格式不合法!')}else if(!checkStuId($('#enlist_id').val())){alert('Are you kidding me! 学号写错了吧...')}else if(!checkPhone($('#enlist_phone').val())){alert('手机号不合法！')}else{$.post('/enlist_submit',{email:$('#enlist_email').val(),stuid:$('#enlist_id').val(),phone:$('#enlist_phone').val(),txt:$('#enlist_txt').val()},function(){msgBox('Information','提交成功！')})}});$('#comment_submit').click(function(){if(!checkEmail($('#comment_email').val())){alert('邮箱格式不合法!')}else{$.post('/suggestion_submit',{email:$('#comment_email').val(),txt:$('#comment_txt').val()},function(){msgBox('Information','提交成功！')})}})});